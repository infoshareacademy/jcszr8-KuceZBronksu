@using Microsoft.AspNetCore.Identity
@using KuceZBronksuDAL.Models

@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Aplikacja Kulinarna</title>

    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="https://samequizy.pl/wp-content/uploads/2019/07/filing_images_8655ad3c3de0.jpeg">
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/css/CustomStyles.css" />
    <link href="~/css/select2.min.css" rel="stylesheet" />
    <link href="~/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/simplepagination.css" rel="stylesheet" />
    <link href="~/css/dropdown.css" rel="stylesheet" />
    <link href="~/css/styles.css" rel="stylesheet"/>
</head>
<body>
    <!-- Responsive navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">Kuce z Bronksu - MealAPP</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Home</a></li>
                    <li class="nav-item"><a class="nav-link" asp-area="" asp-controller="Recipe" asp-action="Index">Recipes</a></li>
                    @if (SignInManager.IsSignedIn(User))
                    {
                        <li class="nav-item"><a class="nav-link" asp-area="" asp-controller="Recipe" asp-action="FavouriteRecipes">Favourite Recipes</a></li>
                    }
                    <li class="nav-item"><a class="nav-link" asp-area="" asp-controller="Recipe" asp-action="Create">Add Recipe</a></li>
                    @if (User.IsInRole("Admin"))
                    {
                        <li class="nav-item"><a class="nav-link" asp-area="" asp-controller="Account" asp-action="AdministratorPanel">Administrator Panel</a></li>
                    }
                    <li class="nav-item">
                        <div class="dropdown">
                            <button onclick="myFunction()" class="dropbtn">Account</button>
                            <div id="myDropdown" class="dropdown-content">
                                    @if (SignInManager.IsSignedIn(User))
                                    {
                                    <a id="logout" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">Logout</a>
                                    }
                                    else
                                    {
                                        <a id="register" asp-area="Identity" asp-page="/Account/Register">Register</a>
                                        <a id="login" asp-area="Identity" asp-page="/Account/Login">Login</a>
                                    }
                            </div>
                        </div>
                    </li>
            </ul>
        </div>
        </div>
    </nav>
    <!-- Page header with logo and tagline-->
    <!-- Page content-->
    <div class="wrapper">
        @RenderBody()
    </div>
    <!-- Footer-->
    <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top" id="footer">
        <div class="col-md-4 d-flex align-items-center">
            <img class="footer-image" src="https://i.pinimg.com/originals/fb/be/f6/fbbef6c75fc036ffc3f3aa0e2b604cd3.jpg">
            <span class="mb-3 mb-md-0 text-body-secondary">© 2023 KuceZBronksu Company, Inc</span>
        </div>
    </footer>

    <!-- Core theme JS-->
    @await RenderSectionAsync("Scripts", required: false)
    <!-- Bootstrap core JS-->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/popper.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/jquery-1.10.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>
    <script src="~/js/main.js"></script>
    <script src="~/js/jquery.simplepagination.js"></script>
    <script>
        jQuery(function ($) {
            var items = $("#content tbody tr");

            var numItems = items.length;
            var perPage = 1;

            // Only show the first 2 (or first `per_page`) items initially.
            items.slice(perPage).hide();

            // Now setup the pagination using the `#pagination` div.
            $("#pagination").pagination({
                items: numItems,
                itemsOnPage: perPage,
                cssStyle: "light-theme",

                // This is the actual page changing functionality.
                onPageClick: function (pageNumber) {
                    // We need to show and hide `tr`s appropriately.
                    var showFrom = perPage * (pageNumber - 1);
                    var showTo = showFrom + perPage;

                    // We'll first hide everything...
                    items.hide()
                        // ... and then only show the appropriate rows.
                        .slice(showFrom, showTo).show();
                }
            });
        });
    </script>
</body>
</html>
